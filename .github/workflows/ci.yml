# ğŸ§  Nome da pipeline
# Esse nome aparece na aba "Actions" do GitHub e descreve o propÃ³sito do workflow
name: Run Geological Feature Identifier

# ğŸš€ Quando o workflow serÃ¡ executado?
# Aqui ele serÃ¡ acionado automaticamente quando:
# - houver um "push" no branch main
# - ou uma "pull request" para o branch main
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

# ğŸ“¦ DefiniÃ§Ã£o do job principal (processo)
jobs:
  run-gfi:  # Nome interno do job (pode ser qualquer nome identificÃ¡vel)

    # ğŸ–¥ï¸ Ambiente onde o job serÃ¡ executado
    # "ubuntu-latest" Ã© um sistema Linux jÃ¡ preparado pelo GitHub
    runs-on: ubuntu-latest

    # ğŸ” Passos a serem seguidos no job
    steps:

    # ğŸ“¥ Etapa 1: Clonar o repositÃ³rio no ambiente da mÃ¡quina virtual do GitHub
    - name: Clonar repositÃ³rio
      uses: actions/checkout@v3  # Usa a action oficial "checkout" para clonar os arquivos do repositÃ³rio

    # ğŸ Etapa 2: Configurar o Python
    # Instala e define a versÃ£o do Python que serÃ¡ usada no ambiente
    - name: Configurar Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'  # VersÃ£o especÃ­fica do Python (ajustÃ¡vel conforme necessidade)

    # ğŸ“¦ Etapa 3: Instalar dependÃªncias do projeto
    # Atualiza o pip e instala os pacotes listados no requirements.txt
    - name: Instalar dependÃªncias
      run: |
        python -m pip install --upgrade pip  # Garante que o pip estÃ¡ na versÃ£o mais recente
        pip install -r requirements.txt       # Instala os pacotes necessÃ¡rios do projeto

    # ğŸ§  Etapa 4: Executar o script principal do projeto (inferÃªncia sÃ­smica)
    # Roda o script GFI.py, que utiliza OpenCV e PyTorch para identificar feiÃ§Ãµes sÃ­smicas
    - name: Rodar GFI.py
      run: |
        python GFI.py
