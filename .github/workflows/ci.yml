# 🧠 Nome da pipeline
# Esse nome aparece na aba "Actions" do GitHub e descreve o propósito do workflow
name: Run Geological Feature Identifier

# 🚀 Quando o workflow será executado?
# Aqui ele será acionado automaticamente quando:
# - houver um "push" no branch main
# - ou uma "pull request" para o branch main
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

# 📦 Definição do job principal (processo)
jobs:
  run-gfi:  # Nome interno do job (pode ser qualquer nome identificável)

    # 🖥️ Ambiente onde o job será executado
    # "ubuntu-latest" é um sistema Linux já preparado pelo GitHub
    runs-on: ubuntu-latest

    # 🔁 Passos a serem seguidos no job
    steps:

    # 📥 Etapa 1: Clonar o repositório no ambiente da máquina virtual do GitHub
    - name: Clonar repositório
      uses: actions/checkout@v3  # Usa a action oficial "checkout" para clonar os arquivos do repositório

    # 🐍 Etapa 2: Configurar o Python
    # Instala e define a versão do Python que será usada no ambiente
    - name: Configurar Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'  # Versão específica do Python (ajustável conforme necessidade)

    # 📦 Etapa 3: Instalar dependências do projeto
    # Atualiza o pip e instala os pacotes listados no requirements.txt
    - name: Instalar dependências
      run: |
        python -m pip install --upgrade pip  # Garante que o pip está na versão mais recente
        pip install -r requirements.txt       # Instala os pacotes necessários do projeto

    # 🧠 Etapa 4: Executar o script principal do projeto (inferência sísmica)
    # Roda o script GFI.py, que utiliza OpenCV e PyTorch para identificar feições sísmicas
    - name: Rodar GFI.py
      run: |
        python GFI.py
